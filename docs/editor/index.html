<!DOCTYPE html>
<html>

<head>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootswatch@4.3.1/dist/darkly/bootstrap.min.css"
    crossorigin="anonymous">
  <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
  <link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"
    integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
  <style>
    :root {
      --grid-size: 32px;
    }

    ul {
      list-style-type: none;
    }

    #equipped-content,
    #inventory-content,
    #stash-content,
    #cube-content,
    #mercenary-content {
      font-family: 'Avenir', Helvetica, Arial, sans-serif;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }

    .grid {
      position: relative;
      background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAkFBMVEXgpITgxJT85KSsnGTYuGQIBAQEBAQ0NDQsLCwwMDA4ODhERERAQEBISEhMTExUVFQcHBwMDAgMDAwICAgQEBAUFBQYGBiUgGRQUFAgICA8PDxwcHBgYGAkJCSEhIR8fHygoKCQkJA0ODycmJQoKCisrKwUEBDAoIB0dHRsbGxoaGhkZGRcXFxYWFh8dHD///96rxWVAAAAAWJLR0QvI9QgEQAAAAd0SU1FB+MMBhUdKRus5LoAAAAJdnBBZwAAAH0AAAAgADfqh7QAAAI2SURBVDjLfZPrYtowDIUTUpwLgcryBUwISYqzEbru/R9vRw7tuj8zmMTyZ1k6ElmWbzZ5XvwdWH8aXopNnuVb9b+xyYqyqjGaXVs2Tbvft7vDbr9r8d7uD6+qyArSzGzYWmM4DWudY2PM1vqdesmK2rOxyY6ZvsABK8XUwsPx1AR2Fsc8PmydlV2W+9mf5Yru0vbOeyfTAkn3GezjUQpwHS6ElUrTyEy/sjaVAOM0uG95JQ+sbCLeEjBO9B0wyIdNCsKUKs+Ot9sU+eu4QSCcEsdyG1fgFu2T8MF6Qr5GrQYHJQWo0yGc0X2g3rEyT48JGMex0loro7VzNgRK7sw/QNRbOIAI3opiQqxX+BTDONbkrQuRoLMyqIT/zDuI1PDQBHJU1cEmmS3KxOslUYB5HmvcTVrDOzasZ7Vm+dQBQkV2sCqdaoRgNcRIb/UT6Fkb86Wlo76ueukJlmIdp3Gu1tKs5aIQ+lhH8k678zPIKNpgkwMZ9lJ8Iis5r8BtfCNnFFrO9ZEs9YjAwcLO7QSADiUOpPylr7x0DSoCfm05pFk5aTpsSTMiUZuqbSzV0g/zPJ9/sGf2fm1FnEy1hvYC/BznuZV+RWSrPCx6oiMhTupJAKeqp0CxqgIqJbEE6CQBNfLPQpDTdbjfl/sw3B/vy9J1Q3c5VeScq1dA9jvYAeEh74/LZV/hzrMA03S9Dt0DwNLBSbcsy+PXx+XQ1hRPqEXxe7jD+ngsMkC84xXEx+uhKfcq/wNEN0Tadg4IdQAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxOS0xMi0wNlQyMToyOTo0MS0wNTowMM1r0B4AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTktMTItMDZUMjE6Mjk6NDEtMDU6MDC8NmiiAAAAAElFTkSuQmCC);
      background-repeat: repeat;
      margin: 1em auto;
    }

    .inventory {
      position: relative;
      margin: 1em auto;
      width: calc(var(--grid-size) * 10);
      height: calc(var(--grid-size) * 7);
    }

    .head {
      position: absolute;
      background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADYAAAA1CAMAAAA9D+hBAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAP1BMVEUAAAAgICAMDAgEBAQICAgoKCgMDAwQEBAUFBQYGBgcHBw0NDQkJCQwMDAsLCw4ODgIBAQ8PDxAQEAUJBj///8EJ/EZAAAAAXRSTlMAQObYZgAAAAFiS0dEFJLfyTUAAAAHdElNRQfjDAYVCw/VOdSQAAAEfklEQVRIx51Wi44bOQyLHyNLXmd2evf//3ok5UnTbRcozkC2qW1alERJeTz+3yq13atjtb9bj8P68Jhz9DGGmfWOPwN/8YK+RpklOk4tcD5Gwj4CJ7OU6e446jjoI3DDgR21WTnWUfggdrgnQo/n8m4+cTiBBIRonEfh43gETNZqrfI7nm2kAWvTcRyrTADAEafOT0TAPv4BxVid7IeXCaZJEg9bMy8g6+KSWBAFEJ85A9fpspe1ZuA2YXAV3GAJLsk97w0PuDgP2YsohAFeipUp3/Au7pL3IK9gVGCBCPPwiU+BC4hARwjmPItgTmrMASMhSlhTT6QxmDvmmHBiFI/jCMI+na4Yzl128B4N0M5UGuhgmVGcjHyu6bKmGHRgFH2EdB28Y8wEzHKB5FrIJ5WBXamkdaiqyWN6hwyeIYlw1+dxwn4BLJjqW3+PM8VIgukMONrrQrd5HFMhPLY14TZMyUIUTJoi79QnvjNC0ExZ5KDcvmAVtqw5E1R0d0i1ZrLH2IIoYt060tQzJFvqRk/ms8i2qxwowd7nCWCqHQKzJHnwqNUhh0c8kZU+FDDyVFjOA7mD1vX/TfKgRGFObqEU+D5RUr+etoDa5zrP6BDhzAScfF3FyRJRLhXTFLaiiQPmeRXEkkp8wTL+SNnH0ZMjSy6D2fo8qNACWQ1Fa6eb91T9gJ3ykChWKcusMcKsvOOc2GhJ8nkhG0FvqIXnAswTFpk5kF5zqOpodCfg07eQXdYWNgeXeDLKsACXEX2LolwmbBIDrwl70rfG0kuh6YrqD7cqCmGwQRH2YzI6KqsR63SpWrlWJVHmKiNXb1ApEvYPs/UvroTK3y7lLfoWCrXghaoM9kWgPEmOTC8WZM69XkXFM9+4g6JWVws2QRjYsFqvCg4sK3WzTv2YGowEaCs6eACGRuIZyR/htcJCiP+4hwEuZ9nLGv2nd5DKTgAaXsXjV2Vlw0CWH3N61+oooS4VTCeaQ9ZbBYRTRw7OKUO7GK+LHQMFChr01K36Wp7WaqTQub/M7/Lrl+hgdoREZNmB0Y8krsqx1C6WHMOwNk3LWYUFUVVnl0R+L1askeQ9CXMCzDNamnsNSWrUVYuADagJ24+lk4wfSJwf845lwvwwEuFsA8tqu08WWbJK6IWHi8yrPPVY+QwcmWLJQvCstyVOlU0K7kNjh6f9vnNW2AYoGvbQwvTeDQ8JqP3qbIM2FKnNG8YKNW6q/shhEDfs/qWgjB0ZpA2zkhOMk1Nz8jUDtC5Tm0J/OJacuzZMiQ41Kajkgjb8BcOdYDdlHNCXfxpjWgYmYqUKaA87Inkg0SovZUus2rtz3tR5JVIE8q5uBqAODAGEH4HMxvS+OGRYs+q7KvskadsNjrhp/S1A935Tlb9zfzzBo6Z82XRq+2YxXm+/uZ5GkaCqbM+gb9cm0t9gb8r9ynFjsj9uxakCeq/8aWTf0bvf0CS8XtYGE8dY/kar3WHY/Jj0V0i+UNpwta9UeDJDBMiq1180mRf+FMnttX4GXK1nn/zN+79Z/wHlxT4pxS9SugAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxOS0xMi0wNlQyMToxMToxNS0wNTowMPvx3JwAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTktMTItMDZUMjE6MTE6MTUtMDU6MDCKrGQgAAAAAElFTkSuQmCC);
      background-size: contain;
      top: 0;
      left: calc(var(--grid-size) * 5 - var(--grid-size));
      width: calc(var(--grid-size) * 2);
      height: calc(var(--grid-size) * 2);
    }

    .neck {
      position: absolute;
      background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAAYCAMAAAAmopZHAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAATlBMVEUAAAAgICAMDAwEBAQcHBwQEBAUFBQICAgsLCwYGBg0NDRAQEBwcHA8PDxERERgYGAIBARMTEw4ODgkJCQwMDAoKCgMDAhUVFRkZGT////GusmQAAAAAXRSTlMAQObYZgAAAAFiS0dEGexutYgAAAAHdElNRQfjDAYVCw/VOdSQAAABCklEQVQoz3VR23bDMAizwYBJt9RN0mz//6WT3MtTx0liI4TCpZR/rIp+stL0M17NnY+YhIQKvgaJ0g2WHgrPLcJEqFwWUTAcd/pIs+DlgUeC6WAKsyf/AgkNhAJE02AG8f5VicOQSDwY0+Lfa2NAkUE+9K51aElvt2cPCOCXvl0SOqh9P+6vdiLq2pP6pqfZtgdB1bH8TBj6A3XWZTvZgNyPZvrEZYR4k+y3lrtMMeDJY4j4sf2uOeVmvzvwgaaq46UI6iW/Iz7CMtlPd2WA/IOKIq3FGL7Z1GnkU1Il93p6nU5kC8xz4opSl37YbNrzzecOWj5UxJ3zz9fi43lge5x/us3lvkckzPsDamoLKeqYENYAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTktMTItMDZUMjE6MTE6MTUtMDU6MDD78dycAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE5LTEyLTA2VDIxOjExOjE1LTA1OjAwiqxkIAAAAABJRU5ErkJggg==);
      background-size: contain;
      top: calc((var(--grid-size) * .25));
      left: calc((var(--grid-size) * 5) + (var(--grid-size) * 1.25));
      width: calc(var(--grid-size) * 1);
      height: calc(var(--grid-size) * 1);
    }

    .torso {
      position: absolute;
      background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADYAAABSCAMAAAAo/tejAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAWlBMVEUAAAAIBAQEBAQICAgcHBwgICAMDAgwMDAkJCQYGBgUFBQQEBAMDAw8PDxEREQUEBA0NDQ4ODgsLCwoKChAQEBMTExISEhQUFA0ODxEQDwoJBw8ODBUVFT///+g5PezAAAAAXRSTlMAQObYZgAAAAFiS0dEHesDcZEAAAAHdElNRQfjDAYVCw/VOdSQAAAIC0lEQVRYw51XCZLjNgy0RFIED0k8ZI+Tzf/fmW6Q9szsbqWSqObwIQhAo9EAb7f/dy2rWdb/fN2sMQb/zb+73cz7bm7jy/nuV2Pz+7c3L86GGFM2q9lyyjFFG99xm5znQ43J25aszWum2e6cszHHzM9Njs5Fl6IxKS20Mm8H+J9TCtYlmh0SbIwZVwgxwBtcw3mM+DjP+A0+SEl98nv1JhYR5hOPiSlIwQ1RDXnlvCHK7ESflUfUGmR1ATeGEFzIWZrAUZqWdJwRVseneB0UgJHpzZ/4AldHJWznV8QH4MQ0om1dxCGB8cEE6LbbaJ11rgOGTgt+STtcKaQInK00r6kgCgClZq3DFcB0mekiUI3w9RtcD6ld96N6xzIh0k3NRNTMSTLR2kgvMzXchkhaj+1xf1zVdzhGPkEhwRvrOi7Gc24oudEAGWx/HBJDj/Vx7KWJU7tRgOYYu5pZm8A0FAtxLCanXuqxo6wNLzyAESdKKfWGlOFNGuKGHYi9LINLsu++NTxRpHf+b75WL4F1vxERK0QyOulWEQajTCxXKc1Z6aX4bmFf6nUce7Nk3a0REfiWFPBVQ3rrkrMt+/Fxte6CdF/2IlZK3a8LyDhUCmYZKBKXHBGSE4tgUadSnveroFyEy1fgEdu+00wsuHKTteN2CWe2iL6jrA5/e+n9WYtHPZlak7aH3Pfr2GsHADBbWvUNTrKDlfOAHfk36eKBQIjMAL3UjodNBXZXswD65k33vpFWAgREWI76bMV7X2oFL5zyQaQ8Q9uPx+WH2SYNWKE1PcJGFQW3X/sDONJbOiNqzOwFX3t4G2bNWEUwhdqQCJ5b9v24kxfwZkFmtCHJB2DE1eMokZC0NcfmAxq49YBgnfMV4H88HhWQoC+GEoi0Vi/n8BnrDW/4IqPvbXfdB6TS/PW43/8A6ZE0aEP6gFkoSpUsNY7GYUuqmbN4OHvoz3I8Hj9+eDIRfXKiG8BawI1WTkORbg1yBatkXejeBpSM9f2BBCvK0DTKEGEKeQJfV9UFIJk2qloi01sE+nKAChXkvzwCA1awI0nZGvw7g0z8dM3IqtOZ9eBrBY+O3ip7M0ToqvafOkpWG8cDKb5j3pExgrH7/qxVdhJQe1PVD4WgGeSUZkXFAYFQTy2KA74exxNxXnsDgJCGwF8qEOUWboeZ5ggVZ9+1iurste6VxqWR+RRoMIVqq1GqlhR9YzIkAw1TWt9RtKOWHURB4yBGi4TDVGkKexi5maxmyEzQLK0eHwdc3f+6A9JK4qGJ52TQ5NIogM6HhChEfG/P/Q4if9w/6K2RKARzaKDGN8rdM0cYtMOgAr539JS/3yGMbEm0T2czRfISyLzHFqj8Gl/WoaUdqAf+owEgAKgbfFmdm5F2n2blNfZysECu+X7t1/0veIOi+uLRgVTVM83chuWtmzwijmSXh8tahyc+hOoiDI80GQM5m69BrkEnS4TOAP3qoa21O16cY+xyFICqO8aif093fO2aa7DSUlfKKjkAI10K1AzTTzl52ThhhWhoxSGnoCXR6KgYIsTzCD4hh/A6N1mShlmCVsYTalcKdWs4Uk8wpJn2z/QmcGMmlNgzhBXoOhjGMDvDmI+a2koqj3Kv6zZrwPUC6Y2MSHvcmnn7qZMyb2qWXuXO04wgn0I5DS+rNHMyczPD7EujAMa8mMbVB1UgCOyTPK7NLF93QF1xWO63NwRgx0IS07TCYDW/WxxpliaU65JGW3FvmZrzfWf7NJNsPvvBmHNYfF8JKRnn5126T64mr/9wmSEz7G/zzexzxfz1AVwzdNsJ4r66+2aGrTIxysXwx6DUTket0iV92S2VJe8LO1YY6895kp7YKNB2g8+J9Hg7fDXOeE7SzUlZhd2BjMYkgChow6n+zDtR7u8I6NYEd2QZVwcblTFDI1fFeXLyN9idJ/kF9E68Avh0NpbenOPPuX0CmNPrGrtoSmNUKG+/I0k/S+bGxQmqjQmyBSoQl+mYRpHM9lMBjM53frtxtgZdj9jfSaHiF8tIDYeVL6Xl9qsSkbgzCFWrc2goUzWndctfzMwYeNb5HvQlNMyPhdDp2UD9McaXmRvQ4VdXX3suaubLEztRKT0ovaYZ6vYa+YPheU3YS/SkQTMqyhNSSSXnRSjzpw6gbsvAx5ydi6zVo0XC3L+uxxNHB2qeUzPz1awtShrEiInLzYSCHeR6QiaRa5N54krjea+9pMZNpSVwGWxlJB8w+wk/B5yols8JbPLLjKKZeFDBJCtdVA0Cb4yp6YptR5PmdYzdYebN0BrBmupbcaoJwA4+cURhlDrgwMrVfPY3OwBvcZjCjoaVPS5UHm4UwsJZjC6rZgxSKz5UuYwzUiJiiHMQLyWstDDCs7iCjeQGJUeYt8q/28qdC0tGH2fCwI0EzQZYMEi6TtO3CGvjlDBYGDhvnIMKswGwioiuFljKsQiwUdUMkW7DDN3M9FgdkARrInuD8NMQ2Tbh4h71ILW+dgwEqbUIc0QPlDdgjpMDTgTdPzkfuZoYlcwUxxAecu+VkaT/QmrjNTcLPdlwOeExU+vEY7kWgAsc1vLKUZimjmfu8FAgnmv2ejxFOzyyUcyApAYejwWDXqAzG1uSQwwDCz2AMY7hT184zOJDo01Gswup98DDkQ6aFGcr81RXnsU/n10bhwctJGHmfCs8/Djd4LQhSXeqGkWWhz0uJvRFnHjuSnMv4chFnLoU8PgEEdYRx2Ov032SJGHgUHoHTjDIvwGEBY02Ip7x9AAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxOS0xMi0wNlQyMToxMToxNS0wNTowMPvx3JwAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTktMTItMDZUMjE6MTE6MTUtMDU6MDCKrGQgAAAAAElFTkSuQmCC);
      background-size: contain;
      top: calc(var(--grid-size) * 2);
      left: calc((var(--grid-size) * 5) - (var(--grid-size)));
      width: calc(var(--grid-size) * 2);
      height: calc(var(--grid-size) * 3);
    }

    .weapon {
      background: url(data:image/png;base64,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);
      background-size: contain;
      width: calc(var(--grid-size) * 2);
      height: calc(var(--grid-size) * 4);
    }

    .right-hand,
    .alt-right-hand {
      top: calc(var(--grid-size) * 1.25);
      left: calc((var(--grid-size) * 5) - (var(--grid-size) * 4.5));
      position: absolute;
    }

    .left-hand,
    .alt-left-hand {
      top: calc(var(--grid-size) * 1.25);
      left: calc((var(--grid-size) * 5) + (var(--grid-size) * 2.5));
      position: absolute;
    }

    .ring {
      background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAAYCAMAAAAmopZHAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAATlBMVEUAAAAgICAMDAwEBAQcHBwQEBAUFBQICAgsLCwYGBg0NDRAQEBwcHA8PDxERERgYGAIBARMTEw4ODgkJCQwMDAoKCgMDAhUVFRkZGT////GusmQAAAAAXRSTlMAQObYZgAAAAFiS0dEGexutYgAAAAHdElNRQfjDAYVCw/VOdSQAAABCklEQVQoz3VR23bDMAizwYBJt9RN0mz//6WT3MtTx0liI4TCpZR/rIp+stL0M17NnY+YhIQKvgaJ0g2WHgrPLcJEqFwWUTAcd/pIs+DlgUeC6WAKsyf/AgkNhAJE02AG8f5VicOQSDwY0+Lfa2NAkUE+9K51aElvt2cPCOCXvl0SOqh9P+6vdiLq2pP6pqfZtgdB1bH8TBj6A3XWZTvZgNyPZvrEZYR4k+y3lrtMMeDJY4j4sf2uOeVmvzvwgaaq46UI6iW/Iz7CMtlPd2WA/IOKIq3FGL7Z1GnkU1Il93p6nU5kC8xz4opSl37YbNrzzecOWj5UxJ3zz9fi43lge5x/us3lvkckzPsDamoLKeqYENYAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTktMTItMDZUMjE6MTE6MTUtMDU6MDD78dycAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE5LTEyLTA2VDIxOjExOjE1LTA1OjAwiqxkIAAAAABJRU5ErkJggg==);
      background-size: contain;
      width: calc(var(--grid-size) * 1);
      height: calc(var(--grid-size) * 1);
    }

    .right-finger {
      position: absolute;
      top: calc(var(--grid-size) * 5.25);
      left: calc((var(--grid-size) * 5) - (var(--grid-size) * 2.25));
    }

    .left-finger {
      position: absolute;
      top: calc(var(--grid-size) * 5.25);
      left: calc((var(--grid-size) * 5) + (var(--grid-size) * 1.25));
    }

    .waist {
      position: absolute;
      background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAAZCAMAAABJlP0xAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAS1BMVEUAAAAEBAQICAgMDAwQEBAIBAQUFBQgICAcHBwoKCgsLCwYGBgMDAgkJCQwMDA0NDQUEBA4ODg8PDxMTExAQEBISEhQUFBERET////Y3YN8AAAAAXRSTlMAQObYZgAAAAFiS0dEGJtphR4AAAAHdElNRQfjDAYVCw/VOdSQAAACOUlEQVQ4y51U227lMAj0hQA2xolP2+3//+kOSU5v+1ItUqzEYgwzjJPS/0T+XZRaa4mVtpwT/RKVy7mUSiUn/i3os2ZO8mOHVVpvWITViAYqRFtUCyJvG7Hm5N8Q4t56n33uorJ3ac2YKQgFpavBkVOnm1U5gPA+W5fepkvbe++ru3hrE0Ci+jw9zfsdfQHjKghka5vI3QHEQbEYRXuIUG+/QawqfLCZupqwIG+izS7aXRnfXfX4qFQvkDbGEA48TOABHCrMhto4x4ywhdcrN7XBJynfQ5JtBOOahxm7QAyJbOZBUA2HKXgEaKt8gR4+PnU8CCRVjY8DpQfnwQV45SCW+hhXJdAV43Ire8aGqsiDdVC9ZjKVsz+ArgQFKXt5ed2dudb8JcrloIy5SjsLpGUl2sxsWvh1QSR+vP2Z8q8nB4TtYQxIzrfkaE0XGG9D5/vbvjALdLfdCIrpNW9n0bTbJUQ5rPqOwbOEav5Y2t/WHnNafa3ZYwByOTUtCHL5norPkevBwHCdbr4e0zEuOBCWhCf9CXpIyGmoVjZvmNDBCNIFR4UPrWlYXpoHhm8QLoAKVAjZneDoUQ4qtoQUiWjWziGjloteOqZdwyT1VBk20QP7dWRdWnU2NbcwpXnA9B5FehUqMEk9LVwhkShvubbFBZlRCIdy8JQnBiCto9LHLautn0LtCy2iiXbeC5ezm6dZIIRdv5mw4n05cQsbKMcdZ7rnSOXTX+k9QGFuCn89G/iS8fN/hOcvK9QanQryyfIAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTktMTItMDZUMjE6MTE6MTUtMDU6MDD78dycAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE5LTEyLTA2VDIxOjExOjE1LTA1OjAwiqxkIAAAAABJRU5ErkJggg==);
      background-size: contain;
      top: calc(var(--grid-size) * 5.25);
      left: calc((var(--grid-size) * 5) - (var(--grid-size)));
      width: calc(var(--grid-size) * 2);
      height: calc(var(--grid-size) * 1);
    }

    .feet {
      position: absolute;
      background: url(data:image/png;base64,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);
      background-size: contain;
      top: calc(var(--grid-size) * 5.25);
      left: calc((var(--grid-size) * 5) + (var(--grid-size) * 2.5));
      width: calc(var(--grid-size) * 2);
      height: calc(var(--grid-size) * 2);
    }

    .hands {
      position: absolute;
      background: url(data:image/png;base64,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);
      background-size: contain;
      top: calc(var(--grid-size) * 5.25);
      left: calc((var(--grid-size) * 5) - (var(--grid-size) * 4.5));
      width: calc(var(--grid-size) * 2);
      height: calc(var(--grid-size) * 2);
    }

    .right-tab {
      top: calc(var(--grid-size) * .75);
      left: calc((var(--grid-size) * 5) - (var(--grid-size) * 4.5));
      position: absolute;
    }

    .left-tab {
      top: calc(var(--grid-size) * .75);
      left: calc((var(--grid-size) * 5) + (var(--grid-size) * 2.5));
      position: absolute;
    }

    .tab {
      padding: 10px;
    }

    .inventory .item {
      background: none;
      width: 100%;
      height: 100%;
    }

    .item {
      position: absolute;
      background: rgba(0, 0, 45, 0.5);
    }

    .item-edit {
      position: relative;
      background: rgba(0, 0, 45, 0.5);
    }

    .item:hover {
      background-color: rgb(105, 105, 255);
    }

    .item .selected {
      border: rgb(105, 105, 255) 1px solid;
    }

    .ethereal {
      opacity: 0.5;
    }


    .item img,
    .socket img {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translateX(-50%) translateY(-50%);
      max-width: 100%;
      max-height: 100%;
    }

    .empty-socket {
      background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAMAAABF0y+mAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAhFBMVEUAAAAkHBhMPDB4bGCclITEwKiwrJiQhHQEBARoXFCsrKxENCg4MCg4KBxUSCh8dHAoJBxQSDwcFBAIBAQgGBScmJREODQkHBDExMQ8ODAwKCC4uLiUgGRIQCAwKBRYRDhkWDQMDAx0ZDwQEBAICAgUEBBgTDx8ZFBYUEhsUEDMzMz////A4/cnAAAAAXRSTlMAQObYZgAAAAFiS0dEKyS55AgAAAAHdElNRQfjDAYVCw6iPuQGAAAA9UlEQVQoz63S21aDMBAFUDK5FWaaJk0VxVIoWlD+/wNtISIQ3vS87nXCkEmS/EMYcCGl0sB2EaWZRtrv0ejsYJeMDpDo6P0JEdKn57mCI8p9iCXIYNbTgH4WQy+vP1ZovbC7wpsNaM7Or4Kch0FLc1njBQUbi1B6H1dhmLjiuIH14frARuQxnox4f2CtPvxGVdxG9Fuoh2NbZWM7QjcM5EQbI6EZsO50jI6P11tUktbGUp2HnTRRFQHD3Vo8dysjYtM6US0UUqLfhRpQYvpuwdV0aOg2Urf3/83xk3ctJYtYKL9U3/dSIGERPc2ids5BBYYlf843Yd0gxMW5j1YAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTktMTItMDZUMjE6MTE6MTQtMDU6MDBdhtcoAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE5LTEyLTA2VDIxOjExOjE0LTA1OjAwLNtvlAAAAABJRU5ErkJggg==);
      opacity: 0.5;
      background-repeat: no-repeat;
      background-position: center;
    }

    .socket {
      position: absolute;
      min-width: calc(var(--grid-size));
      min-height: calc(var(--grid-size));
      z-index: 999;
    }

    .tippy-tooltip {
      font-family: 'Avenir', Helvetica, Arial, sans-serif;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      text-align: center;
      background: rgba(0, 0, 0, 0.8);
      color: white;
      padding: 8px;
      font-size: 14px;
    }

    .select2 {
      width: 100% !important;
    }

    .select2-container {
      color: black !important;
    }

    .dgrey {
      color: rgb(105, 105, 105);
    }

    .red {
      color: rgb(255, 77, 77);
    }

    .green {
      color: rgb(0, 255, 0);
    }

    .blue {
      color: rgb(105, 105, 255);
    }

    .gold {
      color: rgb(199, 179, 119);
    }

    .grey {
      color: rgb(105, 105, 105);
    }

    .black {
      color: rgb(0, 0, 0);
    }

    .orange {
      color: rgb(255, 168, 0);
    }

    .yellow {
      color: rgb(255, 255, 100);
    }

    .white {
      color: rgb(255, 255, 255);
    }

    .x-1 {
      left: 32px
    }

    .y-1 {
      top: 32px
    }

    .w-1 {
      width: 32px
    }

    .h-1 {
      height: 32px
    }

    .x-2 {
      left: 64px
    }

    .y-2 {
      top: 64px
    }

    .w-2 {
      width: 64px
    }

    .h-2 {
      height: 64px
    }

    .x-3 {
      left: 96px
    }

    .y-3 {
      top: 96px
    }

    .w-3 {
      width: 96px
    }

    .h-3 {
      height: 96px
    }

    .x-4 {
      left: 128px
    }

    .y-4 {
      top: 128px
    }

    .w-4 {
      width: 128px
    }

    .h-4 {
      height: 128px
    }

    .x-5 {
      left: 160px
    }

    .y-5 {
      top: 160px
    }

    .w-5 {
      width: 160px
    }

    .h-5 {
      height: 160px
    }

    .x-6 {
      left: 192px
    }

    .y-6 {
      top: 192px
    }

    .w-6 {
      width: 192px
    }

    .h-6 {
      height: 192px
    }

    .x-7 {
      left: 224px
    }

    .y-7 {
      top: 224px
    }

    .w-7 {
      width: 224px
    }

    .h-7 {
      height: 224px
    }

    .x-8 {
      left: 256px
    }

    .y-8 {
      top: 256px
    }

    .w-8 {
      width: 256px
    }

    .h-8 {
      height: 256px
    }

    .x-9 {
      left: 288px
    }

    .y-9 {
      top: 288px
    }

    .w-9 {
      width: 288px
    }

    .h-9 {
      height: 288px
    }

    .x-10 {
      left: 320px
    }

    .y-10 {
      top: 320px
    }

    .w-10 {
      width: 320px
    }

    .h-10 {
      height: 320px
    }

    .x-11 {
      left: 352px
    }

    .y-11 {
      top: 352px
    }

    .w-11 {
      width: 352px
    }

    .h-11 {
      height: 352px
    }

    .x-12 {
      left: 384px
    }

    .y-12 {
      top: 384px
    }

    .w-12 {
      width: 384px
    }

    .h-12 {
      height: 384px
    }

    .x-13 {
      left: 416px
    }

    .y-13 {
      top: 416px
    }

    .w-13 {
      width: 416px
    }

    .h-13 {
      height: 416px
    }

    .x-14 {
      left: 448px
    }

    .y-14 {
      top: 448px
    }

    .w-14 {
      width: 448px
    }

    .h-14 {
      height: 448px
    }

    .x-15 {
      left: 480px
    }

    .y-15 {
      top: 480px
    }

    .w-15 {
      width: 480px
    }

    .h-15 {
      height: 480px
    }

    .x-16 {
      left: 512px
    }

    .y-16 {
      top: 512px
    }

    .w-16 {
      width: 512px
    }

    .h-16 {
      height: 512px
    }

    .x-17 {
      left: 544px
    }

    .y-17 {
      top: 544px
    }

    .w-17 {
      width: 544px
    }

    .h-17 {
      height: 544px
    }

    .x-18 {
      left: 576px
    }

    .y-18 {
      top: 576px
    }

    .w-18 {
      width: 576px
    }

    .h-18 {
      height: 576px
    }

    .x-19 {
      left: 608px
    }

    .y-19 {
      top: 608px
    }

    .w-19 {
      width: 608px
    }

    .h-19 {
      height: 608px
    }

    .x-20 {
      left: 640px
    }

    .y-20 {
      top: 640px
    }

    .w-20 {
      width: 640px
    }

    .h-20 {
      height: 640px
    }
  </style>
  <title>d2s - Example</title>
</head>

<body>
  <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="octicon octicon-clippy navbar-brand">
      <i class="fa fa-fw fa-github"></i>
      <a href="https://github.com/dschu012">dschu012</a> / <a class="font-weight-bold"
        href="https://github.com/dschu012/d2s">d2s</a>
    </div>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
      aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav">
        <li class="nav-item active">
          <a class="nav-link" href="#">Home <span class="sr-only">(current)</span></a>
        </li>
      </ul>
    </div>
  </nav>
  <div class="container-fluid" id="app">
    <div class="row">
      <div class="col-2 d-none d-md-block"></div>
      <div class="col-8 mt-2">
        <div class="card bg-light">
          <div class="card-body">
            <div class="alert alert-primary" role="alert">
              This editor is still a work in progress. Some things may not work. Found a bug? <a href="https://github.com/dschu012/d2s/issues/new">Report it.</a>
            </div>
            <form id="d2sForm">
              <fieldset>
                <div class="form-group">
                  <div class="input-group">
                    <div class="custom-file">
                      <input type="file" name="d2sFile" @change="onFileChange" id="d2sFile">
                      <label class="custom-file-label" for="d2sFile">*.d2s</label>
                    </div>
                    <div class="input-group-append"><span>&nbsp;</span></div>
                  </div>
                </div>
                <div v-if="save != null">
                  <ul class="nav nav-tabs" id="tabs">
                    <li class="nav-item">
                      <a class="nav-link active" id="stats-tab" data-toggle="tab" data-target="#stats-content"
                        role="tab" type="button">Stats</a>
                    </li>
                    <li class="nav-item" role="presentation">
                      <a class="nav-link" id="waypoints-tab" data-toggle="tab" data-target="#waypoints-content"
                        role="tab" type="button">Waypoints</a>
                    </li>
                    <li class="nav-item" role="presentation">
                      <a class="nav-link" id="quests-tab" data-toggle="tab" data-target="#quests-content" role="tab"
                        type="button">Quests</a>
                    </li>
                    <li class="nav-item" role="presentation">
                      <a class="nav-link" id="skills-tab" data-toggle="tab" data-target="#skills-content" role="tab"
                        type="button">Skills</a>
                    </li>
                    <li class="nav-item" role="presentation">
                      <a class="nav-link" id="items-tab" data-toggle="tab" data-target="#items-content" role="tab"
                        type="button">Items</a>
                    </li>

                  </ul>
                  <div class="tab-content" id="tabs-content">
                    <div class="tab-pane show active" id="stats-content" role="tabpanel">
                      <Stats v-bind:save.sync="save" />
                    </div>
                    <div class="tab-pane" id="waypoints-content" role="tabpanel">
                      <Waypoints v-bind:save.sync="save" />
                    </div>
                    <div class="tab-pane" id="quests-content" role="tabpanel">
                      <Quests v-bind:save.sync="save" />
                    </div>
                    <div class="tab-pane" id="skills-content" role="tabpanel">
                      <Skills v-bind:save.sync="save" />
                    </div>
                    <div class="tab-pane" id="equipped-content" role="tabpanel">
                      <Equipped v-bind:items.sync="equipped" />
                    </div>
                    <div class="tab-pane" id="items-content" role="tabpanel">
                      <div class="modal" tabindex="-1" role="dialog" id="LoadItem">
                        <div class="modal-dialog" role="document">
                          <div class="modal-content">
                            <div class="modal-header">
                              <h5 class="modal-title">Select an Item</h5>
                              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                              </button>
                            </div>
                            <div class="modal-body">
                              <div class="row d-flex justify-content-center mt-3 pl-5 pr-5">
                                <Item v-if="preview" :item="preview" clazz="item-edit"></Item>
                              </div>
                              <label for="Item">Item</label>
                              <select class="form-control" v-model="previewModel" @change="previewItem" v-select>
                                <option v-for="item in itempack" :value="item" :key="item.key">{{item.key}}</option>
                              </select>
                            </div>
                            <div class="modal-footer">
                              <button type="button" class="btn btn-primary" @click="loadItem"
                                data-dismiss="modal">Load</button>
                              <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="row d-flex justify-content-between mt-3 pl-5 pr-5">
                        <div></div>
                        <div class="btn-group" role="group">
                          <button type="button" class="btn btn-secondary" :class="{ active: activeTab == 1 }"
                            @click="changeTab(1)">Equipped</button>
                          <button type="button" class="btn btn-secondary" :class="{ active: activeTab == 2 }"
                            @click="changeTab(2)">Inventory</button>
                          <button type="button" class="btn btn-secondary" :class="{ active: activeTab == 3 }"
                            @click="changeTab(3)">Stash</button>
                          <button type="button" class="btn btn-secondary" :class="{ active: activeTab == 4 }"
                            @click="changeTab(4)">Cube</button>
                          <button type="button" class="btn btn-secondary" :class="{ active: activeTab == 5 }"
                            @click="changeTab(5)">Mercenary</button>
                        </div>
                        <div class="btn-group" role="group">
                          <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#LoadItem">Load
                            Item</button>
                        </div>
                      </div>
                      <Equipped v-if="activeTab == 1" :items.sync="equipped" @item-selected="onSelect"></Equipped>
                      <Grid v-if="activeTab == 2" :width="10" :height="4" :items.sync="inventory"
                        @item-selected="onSelect"></Grid>
                      <Grid v-if="activeTab == 3" :width="10" :height="10" :items.sync="stash"
                        @item-selected="onSelect"></Grid>
                      <Grid v-if="activeTab == 4" :width="3" :height="4" :items.sync="cube" @item-selected="onSelect">
                      </Grid>
                      <Mercenary v-if="activeTab == 5" :items.sync="mercenary" @item-selected="onSelect"></Mercenary>
                      <Editor v-if="selected" :item.sync="selected" ref="editor"></Editor>
                    </div>
                  </div>
                </div>
              </fieldset>
              <div id="errors">
              </div>
              <br />
              <div v-if="save != null">
                <button type="button" @click="unlockHell" class="btn btn-primary">Unlock Hell</button>
                <button type="button" @click="unlockAllWPs" class="btn btn-primary">Unlock All WPs</button>
                <button type="button" @click="setLvl99" class="btn btn-primary">Set Level 99</button>
                <button type="button" @click="setAllSkills20" class="btn btn-primary">Set All Skills 20</button>
                <br /><br />
                <button type="button" id="d2" class="btn btn-primary" @click="saveFile(0x60)">Save D2</button>
                <button type="button" id="d2r" class="btn btn-primary" @click="saveFile(0x61)">Save D2R</button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
    integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/vue@2.6.8/dist/vue.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
    integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
    crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
    integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
    crossorigin="anonymous"></script>
  <script src="https://unpkg.com/@popperjs/core@2"></script>
  <script src="https://unpkg.com/tippy.js@6"></script>
  <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jimp/0.16.1/jimp.min.js"
    integrity="sha512-CwJxtyYUXii1/F1YLND+mdqhu6ffU3MazNXwYnN3uJrCyt7yR2S24r4JePCday1oz8vSEJBJ9ofzJsKPDqSAjg=="
    crossorigin="anonymous"></script>
  <script src="../../dist/constants.bundle.js"></script>
  <script src="../../dist/d2s.bundle.js"></script>
  <script src="itempack.js"></script>

  <script type="text/x-template" id="Stats">
    <div>
      <div class="form-group mt-2">
        <label for="name">Name</label>
        <input type="text" class="form-control" id="name" placeholder="Character Name"
          v-model="save.header.name" required>
      </div>
      <div class="form-row">
        <div class="col-md-2">
          <label for="Level">Level</label>
          <input type="number" class="form-control" id="Level" v-model.number="save.attributes.level" :min="min(12)" :max="max(12)" @input="change(12, save.attributes, 'level')">
        </div>
        <div class="col-md-2">
          <label for="Level">Experience</label>
          <input type="number" class="form-control" id="Level" v-model.number="save.attributes.experience" :min="min(13)" :max="max(13)" @input="change(13, save.attributes, 'experience')">
        </div>
      </div>
      <div class="form-row">
        <div class="col-md-2">
          <label for="Life">Life</label>
          <div class="input-group">
            <input class="form-control" type="number" id="Life" v-model.number="save.attributes.current_hp" :min="min(6)" :max="max(6)" @input="change(6, save.attributes, 'current_hp')">
            <div class="input-group-prepend input-group-append">
              <div class="input-group-text">/</div>
            </div>
            <input class="form-control" type="number" id="MaxLife" v-model.number="save.attributes.max_hp" :min="min(7)" :max="max(7)" @input="change(7, save.attributes, 'max_hp')">
          </div>
        </div>
        <div class="col-md-2">
          <label for="Mana">Mana</label>
          <div class="input-group">
            <input class="form-control" type="number" id="Mana" v-model.number="save.attributes.current_mana" :min="min(8)" :max="max(8)" @input="change(8, save.attributes, 'current_mana')">
            <div class="input-group-prepend input-group-append">
              <div class="input-group-text">/</div>
            </div>
            <input class="form-control" type="number" id="MaxMana" v-model.number="save.attributes.max_mana" :min="min(9)" :max="max(9)" @input="change(9, save.attributes, 'max_mana')">
          </div>
        </div>
      </div>
      <div class="form-row">
        <div class="col-md-2">
          <label for="Strength">Strength</label>
          <input type="number" class="form-control" id="Strength" v-model.number="save.attributes.strength" :min="min(0)" :max="max(0)" @input="change(0, save.attributes, 'strength')">
        </div>
        <div class="col-md-2">
          <label for="Dexterity">Dexterity</label>
          <input type="number" class="form-control" id="Dexterity" v-model.number="save.attributes.dexterity" :min="min(2)" :max="max(2)" @input="change(2, save.attributes, 'dexterity')">
        </div>
        <div class="col-md-2">
          <label for="Vitality">Vitality</label>
          <input type="number" class="form-control" id="Vitality" v-model.number="save.attributes.vitality" :min="min(3)" :max="max(3)" @input="change(3, save.attributes, 'vitality')">
        </div>
        <div class="col-md-2">
          <label for="Energy">Energy</label>
          <input type="number" class="form-control" id="Energy" v-model.number="save.attributes.energy" :min="min(1)" :max="max(1)" @input="change(1, save.attributes, 'energy')">
        </div>
      </div>
      <div class="form-row">
        <div class="col-md-2">
          <label for="UnusedStatPoints">Unused Stat Points</label>
          <input type="number" class="form-control" id="UnusedStatPoints" v-model.number="save.attributes.unused_stats" :min="min(4)" :max="max(4)" @input="change(4, save.attributes, 'unused_stats')">
        </div>
        <div class="col-md-2">
          <label for="UnusedSkillPoints">Unused Skilled Points</label>
          <input type="number" class="form-control" id="UnusedSkillPoints" v-model.number="save.attributes.unused_skill_points" :min="min(5)" :max="max(5)" @input="change(5, save.attributes, 'unused_skill_points')">
        </div>
      </div>
      <div class="form-row">
        <div class="col-md-2">
          <label for="Gold">Gold</label>
          <input type="number" class="form-control" id="Gold" v-model.number="save.attributes.gold" :min="min(14)" :max="max(14)" @input="change(14, save.attributes, 'gold')">
        </div>
        <div class="col-md-2">
          <label for="StashedGold">Stashed Gold</label>
          <input type="number" class="form-control" id="StashedGold" v-model.number="save.attributes.stashed_gold" :min="min(15)" :max="max(15)" @input="change(15, save.attributes, 'stashed_gold')">
        </div>
      </div>
    </div>
  </script>

  <script type="text/x-template" id="Waypoints">
    <div class="form-row">
      <div class="col-md-4" v-for="difficulty in difficulties">
        <ul><li><i class="fa fa-angle-right rotate"></i> {{difficulty.value}}</li>
          <ul class="col-md-offset-1"><li><i class="fa fa-angle-right rotate"></i> Act I</li>
            <ul class="col-md-offset-2">
              <li><label><input class="form-check-input" type="checkbox" v-model="save.header.waypoints[difficulty.key].act_i.rogue_encampement">Rogue Encampement</label></li>
              <li><label><input class="form-check-input" type="checkbox" v-model="save.header.waypoints[difficulty.key].act_i.cold_plains">Cold Plains</label></li>
              <li><label><input class="form-check-input" type="checkbox" v-model="save.header.waypoints[difficulty.key].act_i.stony_field">Stoney Field</label></li>
              <li><label><input class="form-check-input" type="checkbox" v-model="save.header.waypoints[difficulty.key].act_i.dark_woods">Dark Woods</label></li>
              <li><label><input class="form-check-input" type="checkbox" v-model="save.header.waypoints[difficulty.key].act_i.black_marsh">Black Marsh</label></li>
              <li><label><input class="form-check-input" type="checkbox" v-model="save.header.waypoints[difficulty.key].act_i.outer_cloister">Outer Cloister</label></li>
              <li><label><input class="form-check-input" type="checkbox" v-model="save.header.waypoints[difficulty.key].act_i.jail_lvl_1">Jail Lvl 1</label></li>
              <li><label><input class="form-check-input" type="checkbox" v-model="save.header.waypoints[difficulty.key].act_i.inner_cloister">Inner Cloister</label></li>
              <li><label><input class="form-check-input" type="checkbox" v-model="save.header.waypoints[difficulty.key].act_i.catacombs_lvl_2">Catacombs Lvl 2</label></li>
            </ul>
          </ul>
          <ul class="col-md-offset-1"><li><i class="fa fa-angle-right rotate"></i> Act II</li>
            <ul class="col-md-offset-2">
              <li><label><input class="form-check-input" type="checkbox" v-model="save.header.waypoints[difficulty.key].act_ii.lut_gholein">Lut Gholein</label></li>
              <li><label><input class="form-check-input" type="checkbox" v-model="save.header.waypoints[difficulty.key].act_ii.sewers_lvl_2">Sewers Lvl 2</label></li>
              <li><label><input class="form-check-input" type="checkbox" v-model="save.header.waypoints[difficulty.key].act_ii.dry_hills">Dry Hills</label></li>
              <li><label><input class="form-check-input" type="checkbox" v-model="save.header.waypoints[difficulty.key].act_ii.halls_of_the_dead_lvl_2">Halls of the Dead Lvl 2</label></li>
              <li><label><input class="form-check-input" type="checkbox" v-model="save.header.waypoints[difficulty.key].act_ii.far_oasis">Far Oasis</label></li>
              <li><label><input class="form-check-input" type="checkbox" v-model="save.header.waypoints[difficulty.key].act_ii.lost_city">Lost City</label></li>
              <li><label><input class="form-check-input" type="checkbox" v-model="save.header.waypoints[difficulty.key].act_ii.palace_cellar_lvl_1">Palace Cellar Lvl 1</label></li>
              <li><label><input class="form-check-input" type="checkbox" v-model="save.header.waypoints[difficulty.key].act_ii.arcane_sanctuary">Arcane Sanctuary</label></li>
              <li><label><input class="form-check-input" type="checkbox" v-model="save.header.waypoints[difficulty.key].act_ii.canyon_of_the_magi">Canyon of the Magi</label></li>
            </ul>
          </ul>
          <ul class="col-md-offset-1"><li><i class="fa fa-angle-right rotate"></i> Act III</li>
            <ul class="col-md-offset-2">
              <li><label><input class="form-check-input" type="checkbox" v-model="save.header.waypoints[difficulty.key].act_iii.kurast_docks">Kurast Docks</label></li>
              <li><label><input class="form-check-input" type="checkbox" v-model="save.header.waypoints[difficulty.key].act_iii.spider_forest">Spider Forest</label></li>
              <li><label><input class="form-check-input" type="checkbox" v-model="save.header.waypoints[difficulty.key].act_iii.great_marsh">Great Marsh</label></li>
              <li><label><input class="form-check-input" type="checkbox" v-model="save.header.waypoints[difficulty.key].act_iii.flayer_jungle">Flayer Jungle</label></li>
              <li><label><input class="form-check-input" type="checkbox" v-model="save.header.waypoints[difficulty.key].act_iii.lower_kurast">Lower Kurast</label></li>
              <li><label><input class="form-check-input" type="checkbox" v-model="save.header.waypoints[difficulty.key].act_iii.kurast_bazaar">Kurast Bazaar</label></li>
              <li><label><input class="form-check-input" type="checkbox" v-model="save.header.waypoints[difficulty.key].act_iii.upper_kurast">Upper Kurast</label></li>
              <li><label><input class="form-check-input" type="checkbox" v-model="save.header.waypoints[difficulty.key].act_iii.travincal">Travincal</label></li>
              <li><label><input class="form-check-input" type="checkbox" v-model="save.header.waypoints[difficulty.key].act_iii.durance_of_hate_lvl_2">Durance of Hate Lvl 2</label></li>
            </ul>
          </ul>
          <ul class="col-md-offset-1"><li><i class="fa fa-angle-right rotate"></i> Act IV</li>
            <ul class="col-md-offset-2">
              <li><label><input class="form-check-input" type="checkbox" :checked="save.header.waypoints[difficulty.key].act_iv.the_pandemonium_fortress">Pandemonium Fortress</label></li>
              <li><label><input class="form-check-input" type="checkbox" :checked="save.header.waypoints[difficulty.key].act_iv.city_of_the_damned">City of the Damned</label></li>
              <li><label><input class="form-check-input" type="checkbox" :checked="save.header.waypoints[difficulty.key].act_iv.river_of_flame">River of Flames</label></li>
            </ul>
          </ul>
          <ul class="col-md-offset-1"><li><i class="fa fa-angle-right rotate"></i> Act V</li>
            <ul class="col-md-offset-2">
              <li><label><input class="form-check-input" type="checkbox" v-model="save.header.waypoints[difficulty.key].act_v.harrogath">Harrogath</label></li>
              <li><label><input class="form-check-input" type="checkbox" v-model="save.header.waypoints[difficulty.key].act_v.frigid_highlands">Frigid Highlands</label></li>
              <li><label><input class="form-check-input" type="checkbox" v-model="save.header.waypoints[difficulty.key].act_v.arreat_plateau">Arreat Plateau</label></li>
              <li><label><input class="form-check-input" type="checkbox" v-model="save.header.waypoints[difficulty.key].act_v.crystalline_passage">Crystalline Passage</label></li>
              <li><label><input class="form-check-input" type="checkbox" v-model="save.header.waypoints[difficulty.key].act_v.halls_of_pain">Halls of Pain</label></li>
              <li><label><input class="form-check-input" type="checkbox" v-model="save.header.waypoints[difficulty.key].act_v.glacial_trail">Glacial Trail</label></li>
              <li><label><input class="form-check-input" type="checkbox" v-model="save.header.waypoints[difficulty.key].act_v.frozen_tundra">Frozen Tundra</label></li>
              <li><label><input class="form-check-input" type="checkbox" v-model="save.header.waypoints[difficulty.key].act_v.the_ancients_way">The Ancients' Way</label></li>
              <li><label><input class="form-check-input" type="checkbox" v-model="save.header.waypoints[difficulty.key].act_v.worldstone_keep_lvl_2">Worldstone Keep Lvl 2</label></li>
            </ul>
          </ul>
        </ul>
      </div>
    </div>
  </script>

  <script type="text/x-template" id="Skills">
    <div class="form-row">
      <div class="col-md-4" v-for="i in 3">
        <div class="row">
          <div class="col-md-6" v-for="j in 10">
            <label :for="'Skill' + i + '_' + j">{{save.skills[(i - 1) * 10 + (j - 1)].name}}</label>
            <input type="number" class="form-control" :id="'Skill' + i + '_' + j" min="0" max="20" v-model.number="save.skills[(i - 1) * 10 + (j - 1)].points">
          </div>
        </div>
      </div>
    </div>
  </script>

  <script type="text/x-template" id="Quests">
    <div class="form-row">
      <div class="col-md-4" v-for="difficulty in difficulties">
        <ul><li><i class="fa fa-angle-right rotate"></i> {{difficulty.value}}</li>
          <ul class="col-md-offset-1"><li><i class="fa fa-angle-right rotate"></i> Act I</li>
            <ul class="col-md-offset-2"><li><i class="fa fa-angle-right rotate"></i>Den of Evil</li>
              <ul class="col-md-offset-3">
                <label><input class="form-check-input" type="checkbox" v-model="save.header[difficulty.key].act_i.den_of_evil.is_completed">Completed</label></li>
              </ul>
            </ul>
            <ul class="col-md-offset-2"><li><i class="fa fa-angle-right rotate"></i>Sisters' Burial Grounds</li>
              <ul class="col-md-offset-3">
                <label><input class="form-check-input" type="checkbox" v-model="save.header[difficulty.key].act_i.sisters_burial_grounds.is_completed">Completed</label></li>
              </ul>
            </ul>
            <ul class="col-md-offset-2"><li><i class="fa fa-angle-right rotate"></i>Search for Cain</li>
              <ul class="col-md-offset-3">
                <label><input class="form-check-input" type="checkbox" v-model="save.header[difficulty.key].act_i.the_search_for_cain.is_completed">Completed</label></li>
              </ul>
            </ul>
            <ul class="col-md-offset-2"><li><i class="fa fa-angle-right rotate"></i>The Forgotten Tower</li>
              <ul class="col-md-offset-3">
                <label><input class="form-check-input" type="checkbox" v-model="save.header[difficulty.key].act_i.the_forgotten_tower.is_completed">Completed</label></li>
              </ul>
            </ul>
            <ul class="col-md-offset-2"><li><i class="fa fa-angle-right rotate"></i>Tools of the Trade</li>
              <ul class="col-md-offset-3">
                <label><input class="form-check-input" type="checkbox" v-model="save.header[difficulty.key].act_i.tools_of_the_trade.is_completed">Completed</label></li>
              </ul>
            </ul>
            <ul class="col-md-offset-2"><li><i class="fa fa-angle-right rotate"></i>Sisters to the Slaughter</li>
              <ul class="col-md-offset-3">
                <label><input class="form-check-input" type="checkbox" v-model="save.header[difficulty.key].act_i.sisters_to_the_slaughter.is_completed">Completed</label></li>
              </ul>
            </ul>
          </ul>
        
          <ul class="col-md-offset-1"><li><i class="fa fa-angle-right rotate"></i> Act II</li>
            <ul class="col-md-offset-2"><li><i class="fa fa-angle-right rotate"></i>Radament's Lair</li>
              <ul class="col-md-offset-3">
                <label><input class="form-check-input" type="checkbox" v-model="save.header[difficulty.key].act_ii.radaments_lair.is_completed">Completed</label></li>
              </ul>
            </ul>
            <ul class="col-md-offset-2"><li><i class="fa fa-angle-right rotate"></i>The Horadric Staff</li>
              <ul class="col-md-offset-3">
                <label><input class="form-check-input" type="checkbox" v-model="save.header[difficulty.key].act_ii.the_horadric_staff.is_completed">Completed</label></li>
              </ul>
            </ul>
            <ul class="col-md-offset-2"><li><i class="fa fa-angle-right rotate"></i>Tainted Sun</li>
              <ul class="col-md-offset-3">
                <label><input class="form-check-input" type="checkbox" v-model="save.header[difficulty.key].act_ii.tainted_sun.is_completed">Completed</label></li>
              </ul>
            </ul>
            <ul class="col-md-offset-2"><li><i class="fa fa-angle-right rotate"></i>Arcane Sanctuary</li>
              <ul class="col-md-offset-3">
                <label><input class="form-check-input" type="checkbox" v-model="save.header[difficulty.key].act_ii.arcane_sanctuary.is_completed">Completed</label></li>
              </ul>
            </ul>
            <ul class="col-md-offset-2"><li><i class="fa fa-angle-right rotate"></i>The Summoner</li>
              <ul class="col-md-offset-3">
                <label><input class="form-check-input" type="checkbox" v-model="save.header[difficulty.key].act_ii.the_summoner.is_completed">Completed</label></li>
              </ul>
            </ul>
            <ul class="col-md-offset-2"><li><i class="fa fa-angle-right rotate"></i>The Seven Tombs</li>
              <ul class="col-md-offset-3">
                <label><input class="form-check-input" type="checkbox" v-model="save.header[difficulty.key].act_ii.the_seven_tombs.is_completed">Completed</label></li>
              </ul>
            </ul>
          </ul>
          <ul class="col-md-offset-1"><li><i class="fa fa-angle-right rotate"></i> Act III</li>
            <ul class="col-md-offset-2"><li><i class="fa fa-angle-right rotate"></i>The Golden Bird</li>
              <ul class="col-md-offset-3">
                <label><input class="form-check-input" type="checkbox" v-model="save.header[difficulty.key].act_iii.the_golden_bird.is_completed">Completed</label></li>
              </ul>
            </ul>
            <ul class="col-md-offset-2"><li><i class="fa fa-angle-right rotate"></i>Blade of the Old Religion</li>
              <ul class="col-md-offset-3">
                <label><input class="form-check-input" type="checkbox" v-model="save.header[difficulty.key].act_iii.blade_of_the_old_religion.is_completed">Completed</label></li>
              </ul>
            </ul>
            <ul class="col-md-offset-2"><li><i class="fa fa-angle-right rotate"></i>Khalim's Will</li>
              <ul class="col-md-offset-3">
                <label><input class="form-check-input" type="checkbox" v-model="save.header[difficulty.key].act_iii.khalims_will.is_completed">Completed</label></li>
              </ul>
            </ul>
            <ul class="col-md-offset-2"><li><i class="fa fa-angle-right rotate"></i>Lam Esen's Tome</li>
              <ul class="col-md-offset-3">
                <label><input class="form-check-input" type="checkbox" v-model="save.header[difficulty.key].act_iii.lam_esens_tome.is_completed">Completed</label></li>
              </ul>
            </ul>
            <ul class="col-md-offset-2"><li><i class="fa fa-angle-right rotate"></i>The Blackened Temple</li>
              <ul class="col-md-offset-3">
                <label><input class="form-check-input" type="checkbox" v-model="save.header[difficulty.key].act_iii.the_blackened_temple.is_completed">Completed</label></li>
              </ul>
            </ul>
            <ul class="col-md-offset-2"><li><i class="fa fa-angle-right rotate"></i>The Guardian</li>
              <ul class="col-md-offset-3">
                <label><input class="form-check-input" type="checkbox" v-model="save.header[difficulty.key].act_iii.the_guardian.is_completed">Completed</label></li>
              </ul>
            </ul>
          </ul>
          <ul class="col-md-offset-1"><li><i class="fa fa-angle-right rotate"></i> Act IV</li>
            <ul class="col-md-offset-2"><li><i class="fa fa-angle-right rotate"></i>Fallen Angel</li>
              <ul class="col-md-offset-3">
                <label><input class="form-check-input" type="checkbox" v-model="save.header[difficulty.key].act_iv.the_fallen_angel.is_completed">Completed</label></li>
              </ul>
            </ul>
            <ul class="col-md-offset-2"><li><i class="fa fa-angle-right rotate"></i>Hell's Forge</li>
              <ul class="col-md-offset-3">
                <label><input class="form-check-input" type="checkbox" v-model="save.header[difficulty.key].act_iv.hellforge.is_completed">Completed</label></li>
              </ul>
            </ul>
            <ul class="col-md-offset-2"><li><i class="fa fa-angle-right rotate"></i>Terror's End</li>
              <ul class="col-md-offset-3">
                <label><input class="form-check-input" type="checkbox" v-model="save.header[difficulty.key].act_iv.terrors_end.is_completed">Completed</label></li>
              </ul>
            </ul>
          </ul>
          <ul class="col-md-offset-1"><li><i class="fa fa-angle-right rotate"></i> Act V</li>
            <ul class="col-md-offset-2"><li><i class="fa fa-angle-right rotate"></i>Siege on Harrogath</li>
              <ul class="col-md-offset-3">
                <label><input class="form-check-input" type="checkbox" v-model="save.header[difficulty.key].act_v.siege_on_harrogath.is_completed">Completed</label></li>
              </ul>
            </ul>
            <ul class="col-md-offset-2"><li><i class="fa fa-angle-right rotate"></i>Rescue on Mount Arreat</li>
              <ul class="col-md-offset-3">
                <label><input class="form-check-input" type="checkbox" v-model="save.header[difficulty.key].act_v.rescue_on_mount_arreat.is_completed">Completed</label></li>
              </ul>
            </ul>
            <ul class="col-md-offset-2"><li><i class="fa fa-angle-right rotate"></i>Prison of Ice</li>
              <ul class="col-md-offset-3">
                <label><input class="form-check-input" type="checkbox" v-model="save.header[difficulty.key].act_v.prison_of_ice.is_completed">Completed</label></li>
              </ul>
            </ul>
            <ul class="col-md-offset-2"><li><i class="fa fa-angle-right rotate"></i>Betrayal of Harrogath</li>
              <ul class="col-md-offset-3">
                <label><input class="form-check-input" type="checkbox" v-model="save.header[difficulty.key].act_v.betrayal_of_harrogath.is_completed">Completed</label></li>
              </ul>
            </ul>
            <ul class="col-md-offset-2"><li><i class="fa fa-angle-right rotate"></i>Rite of Passage</li>
              <ul class="col-md-offset-3">
                <label><input class="form-check-input" type="checkbox" v-model="save.header[difficulty.key].act_v.rite_of_passage.is_completed">Completed</label></li>
              </ul>
            </ul>
            <ul class="col-md-offset-2"><li><i class="fa fa-angle-right rotate"></i>Eve of Destruction</li>
              <ul class="col-md-offset-3">
                <label><input class="form-check-input" type="checkbox" v-model="save.header[difficulty.key].act_v.eve_of_destruction.is_completed">Completed</label></li>
              </ul>
            </ul>
          </ul>
        </ul>
      </div>
    </div>
  </script>

  <script type="text/x-template" id="Grid">
    <div class="grid" :class="gridClass">
      <Item v-for="(item, idx) in items" :key="idx" :item.sync="item" @click.native="onSelect(item)" />
    </div>
  </script>


  <script type="text/x-template" id="Editor">
    <div>
      <div class="form-row mt-2">
        <Item :item.sync="item" clazz="item-edit"></Item>
      </div>
      <div class="form-row">
        <div class="col-md-12">
          <div class="form-check form-check-inline">
            <label class="form-check-label"><input class="form-check-input" type="checkbox" v-model="item.identified">Identified</label>
          </div>
          <div class="form-check form-check-inline">
            <label class="form-check-label"><input class="form-check-input" type="checkbox" v-model="item.socketed">Socketed</label>
          </div>
          <div class="form-check form-check-inline">
            <label class="form-check-label"><input class="form-check-input" type="checkbox" v-model="item.ethereal">Ethereal</label>
          </div>
          <div class="form-check form-check-inline">
            <label class="form-check-label"><input class="form-check-input" type="checkbox" v-model="item.given_runeword">Runeword</label>
          </div>
        </div>
      </div>
      <div class="form-row" ref="moveItemErrors">
      </div>
      <div class="form-row">
        <div class="col-md-2">
          <label for="Location">Location</label>
          <select class="form-control" id="Location" v-model.number="target.location">
            <option v-for="l in locations" :value="l.key" :key="l.key">{{l.value}}</option>
          </select>
        </div>
        <div class="col-md-2" v-if="target.location == 1">
          <label for="EquippedLocation">Equipped Location</label>
          <select class="form-control" id="EquippedLocation" v-model.number="target.equipped_location">
            <option v-for="l in equipped_locations" :value="l.key" :key="l.key">{{l.value}}</option>
          </select>
        </div>
        <div class="col-md-2" v-if="target.location == 0">
          <label for="StorageLocation">Storage Location</label>
          <select class="form-control" id="StorageLocation" v-model.number="target.storage_page">
            <option v-for="l in storage_pages" :value="l.key" :key="l.key">{{l.value}}</option>
          </select>
        </div>
        <div class="col-md-2" v-if="target.location == 0">
          <label for="X">X</label>
          <input type="number" class="form-control" id="X" v-model.number="target.x">
        </div>
        <div class="col-md-2" v-if="target.location == 0">
          <label for="Y">Y</label>
          <input type="number" class="form-control" id="Y" v-model.number="target.y">
        </div>
        <div class="col-md-2">
          <label>&nbsp;</label>
          <button type="button" class="form-control btn btn-primary" @click="moveToTarget(item)">Move Item</button>
        </div>
      </div>
      <div class="form-row">
        <div class="col-md-2">
          <label for="ILvl">Item Level</label>
          <input type="number" class="form-control" id="ILvl" v-model.number="item.level">
        </div>
        <div class="col-md-2">
          <label for="Rarity">Rarity</label>
          <select class="form-control" id="Rarity" v-model.number="item.quality">
            <option v-for="rarity in rarities" :value="rarity.key" :key="rarity.key">{{rarity.value}}</option>
          </select>
        </div>
        <div class="col-md-2" v-if="item.socketed">
          <label for="Sockets">Sockets</label>
          <input type="number" class="form-control" id="Sockets" v-model.number="item.total_nr_of_sockets">
        </div>
      </div>
      <div class="form-row" v-if="item.quality == 4">
        <div class="col-md-3">
          <label for="Prefix">Prefix</label>
          <select class="form-control" id="Prefix" v-model.number="item.magic_prefix">
            <option value="0">None</option>
            <option v-for="(p, idx) in prefixes" v-if="p != null && p.n != null" :value="idx" :key="idx">{{p.n}}</option>
          </select>
        </div>
        <div class="col-md-3">
          <label for="Suffix">Suffix</label>
          <select class="form-control" id="Suffix" v-model.number="item.magic_suffix">
            <option value="0">None</option>
            <option v-for="(s, idx) in suffixes" v-if="s != null && s.n != null" :value="idx" :key="idx">{{s.n}}</option>
          </select>
        </div>
      </div>
      <div class="form-row" v-if="item.quality == 6 || item.quality == 8">
        <div class="col-md-3">
          <label for="RareName1">Rare Name 1</label>
          <select class="form-control" id="RareName1" v-model.number="item.rare_name">
            <option v-for="(s, idx) in rare_names" v-if="s != null && s.n != null" :value="idx" :key="idx">{{s.n}}</option>
          </select>
        </div>
        <div class="col-md-3">
          <label for="RareName1">Rare Name 2</label>
          <select class="form-control" id="RareName1" v-model.number="item.rare_name2">
            <option v-for="(s, idx) in rare_names" v-if="s != null && s.n != null" :value="idx" :key="idx">{{s.n}}</option>
          </select>
        </div>
      </div>
      <!-- crashes game -->
      <div class="form-row" v-if="false && item.quality == 5">
        <div class="col-md-3">
          <label for="SetName">Set Name</label>
          <select class="form-control" id="SetName" v-model.number="item.set_id">
            <option v-for="(s, idx) in set_items" v-if="s != null && s.n != null" :value="idx" :key="idx">{{s.n}}</option>
          </select>
        </div>
      </div>
      <div class="form-row" v-if="false && item.quality == 7">
        <div class="col-md-3">
          <label for="UniqueName">Unique Name</label>
          <select class="form-control" id="UniqueName" v-model.number="item.unique_id">
            <option v-for="(s, idx) in unq_items" v-if="s != null && s.n != null" :value="idx" :key="idx">{{s.n}}</option>
          </select>
        </div>
      </div>

      <div>Item Stats</div>
      <ItemStatsEditor :itemStats.sync="item.magic_attributes"></ItemStatsEditor>
      <div v-if="item.runeword_attributes">
        <div>Runeword Stats</div>
        <ItemStatsEditor :itemStats.sync="item.runeword_attributes"></ItemStatsEditor>
      </div>
      <div v-if="item.set_attributes">
        <div v-for="(set_attribute, index) in item.set_attributes">
          <div>Set Stats List {{index}}</div>
          <ItemStatsEditor :itemStats.sync="set_attribute"></ItemStatsEditor>
        </div>
      </div>
      <div v-for="socketed_item in item.socketed_items">
        <Editor ref="itemEditor" :item.sync="socketed_item"></Editor>
      </div>
    </div>
  </script>

  <script type="text/x-template" id="ItemStatsEditor">
    <div>
      <div class="form-row">
        <div class="col-md-2">Stat</div>
        <div class="col-md-2">Value</div>
      </div>
      <div class="form-row" v-for="(stat, statIdx) in itemStats">
        <div class="col-md-2">
          <div class="form-row">
            <div class="col-md-2"><button type="button" class="btn btn-link red" @click="remove(statIdx)">&times;</button></div>
            <div class="col-md-10">
              <select class="form-control" :id="'Stat' + statIdx" v-model.number="stat.id">
                <option v-for="(s, idx) in stats" :value="idx" :key="idx">{{s.s}}</option>
              </select>
            </div>
          </div>
          <!-- <label :for="'Stat' + statIdx">Stat</label> -->
        </div>
        <div class="col-md-2" v-for="i in numValues(stat.id)">
          <!-- <label :for="'Stat' + statIdx + 'Value'+ i">Value</label> -->
          <select class="form-control" :id="'Stat' + statIdx + 'Value'+ i" v-model.number="stat.values[i-1]" v-if="isClass(stat.id, i)">
            <option v-for="(c, idx) in classes" :value="idx" :key="idx">{{c.co}}</option>
          </select>
          <select class="form-control" :id="'Stat' + statIdx + 'Value'+ i" v-model.number="stat.values[i-1]" v-else-if="isClassSkill(stat.id, i)">
            <option v-for="(t, idx) in classes[stat.values[i]].ts" :value="idx" :key="idx">{{t}}</option>
          </select>
          <select class="form-control" :id="'Stat' + statIdx + 'Value'+ i" v-model.number="stat.values[i-1]" v-else-if="isSkill(stat.id, i)">
            <option v-for="(s, idx) in skills" v-if="s != null" :value="idx" :key="idx">{{s.s}}</option>
          </select>
          <input type="number" class="form-control" :min="min(stat.id)" :max="max(stat.id)" @input="change(stat.id, stat.values, i-1)"
            :id="'Stat' + statIdx + 'Value'+ i" v-model.number="stat.values[i-1]" v-else>
        </div>
      </div>
      <div class="form-row">
        <button type="button" class="btn btn-link" @click="add">Add Stat</button>
      </div>
    </div>
  </script>

  <script type="text/x-template" id="Item">
    <div>
      <div ref="itemRef" tabindex="0" :class="itemClass">
        <img :src="item.src" :class="{ ethereal: item.ethereal}" />
        <div v-if="item.total_nr_of_sockets && tooltipShown" class="sockets">
          <div :style="socketStyle(idx)" class="socket"
            :class="{ 'empty-socket': !item.socketed_items || !item.socketed_items[idx-1]}"
            v-for="idx in item.total_nr_of_sockets" :key="idx">
            <img v-if="item.socketed_items && item.socketed_items[idx-1]"
              :src="item.socketed_items[idx-1].src" />
          </div>
        </div>
      </div>
      <div ref="tooltipRef">
        <div :class="itemNameClass(item)" v-html="itemName(item)"></div>
        <div v-if="item.defense_rating">Defense: {{item.defense_rating}}</div>
        <div v-if="item.base_damage">
          <div v-if="item.base_damage.mindam && item.base_damage.maxdam">
            One Hand Damage: {{item.base_damage.mindam}}-{{item.base_damage.maxdam}}
          </div>
          <div v-if="item.base_damage.twohandmindam && item.base_damage.twohandmaxdam">
            Two Hand Damage: {{item.base_damage.twohandmindam}}-{{item.base_damage.twohandmaxdam}}
          </div>
        </div>
        <div v-if="item.max_durability">
          Durability: {{item.current_durability}} of {{item.max_durability}}
        </div>
        <div>
          <div class="blue" v-html="statDescription(stat)"
            v-for="(stat, idx) in item.combined_magic_attributes" :key="idx" />
        </div>
        <div class="blue" v-if="item.ethereal">
          Ethereal
        </div>
        <div class="blue" v-if="item.total_nr_of_sockets">
          Socketed ({{item.total_nr_of_sockets}})
        </div>
      </div>
    </div>
  </script>

  <script type="text/x-template" id="Equipped">
    <div class="inventory">
      <span class="head"><Item v-if="head" :item.sync="head" @click.native="onSelect(head)" /></span>
      <span class="neck"><Item v-if="neck" :item.sync="neck" @click.native="onSelect(neck)" /></span>
      <span class="torso"><Item v-if="torso" :item.sync="torso" @click.native="onSelect(torso)" /></span>
      <span class="right-tab tabs">
        <span class="tab" @click="setAltDisplayed(false)">I</span>
        <span class="tab" @click="setAltDisplayed(true)">II</span>
      </span>
      <span v-show="!alt_displayed" class="right-hand weapon">
        <Item v-if="right_hand" :item.sync="right_hand" @click.native="onSelect(right_hand)" />
      </span>
      <span v-show="alt_displayed" class="alt-right-hand weapon">
        <Item v-if="alt_right_hand" :item.sync="alt_right_hand" @click.native="onSelect(alt_right_hand)" />
      </span>
      <span class="left-tab tabs">
        <span class="tab" @click="setAltDisplayed(false)">I</span>
        <span class="tab" @click="setAltDisplayed(true)">II</span>
      </span>
      <span v-show="!alt_displayed" class="left-hand weapon">
        <Item v-if="left_hand" :item.sync="left_hand" @click.native="onSelect(left_hand)" />
      </span>
      <span v-show="alt_displayed" class="alt-left-hand weapon">
        <Item v-if="alt_left_hand" :item.sync="alt_left_hand" @click.native="onSelect(alt_left_hand)" />
      </span>
      <span class="right-finger ring"><Item v-if="right_finger" :item.sync="right_finger" @click.native="onSelect(right_finger)" /></span>
      <span class="left-finger ring"><Item v-if="left_finger" :item.sync="left_finger" @click.native="onSelect(left_finger)" /></span>
      <span class="waist"><Item v-if="waist" :item.sync="waist" @click.native="onSelect(waist)" /></span>
      <span class="feet"><Item v-if="feet" :item.sync="feet" @click.native="onSelect(feet)" /></span>
      <span class="hands"><Item v-if="hands" :item.sync="hands" @click.native="onSelect(hands)" /></span>
    </div>
  </script>

  <script type="text/x-template" id="Mercenary">

    <div class="inventory">
      <span class="head"><Item v-if="head" :item.sync="head" @click.native="onSelect(head)" /></span>
      <span class="torso"><Item v-if="torso" :item.sync="torso" @click.native="onSelect(torso)" /></span>
      <span class="right-hand weapon"><Item v-if="right_hand" :item.sync="right_hand" @click.native="onSelect(right_hand)" /></span>
      <span class="left-hand weapon"><Item v-if="left_hand" :item.sync="left_hand" @click.native="onSelect(left_hand)" /></span>
    </div>
  </script>

  <script>

    const colormaps = {
      1: 'data/global/items/Palette/grey.dat',
      2: 'data/global/items/Palette/grey2.dat',
      5: 'data/global/items/Palette/greybrown.dat',
      6: 'data/global/items/Palette/invgrey.dat',
      7: 'data/global/items/Palette/invgrey2.dat',
      8: 'data/global/items/Palette/invgreybrown.dat',
    };

    const colors = {
      whit: 0,
      lgry: 1,
      dgry: 2,
      blac: 3,
      lblu: 4,
      dblu: 5,
      cblu: 6,
      lred: 7,
      dred: 8,
      cred: 9,
      lgrn: 10,
      dgrn: 11,
      cgrn: 12,
      lyel: 13,
      dyel: 14,
      lgld: 15,
      dgld: 16,
      lpur: 17,
      dpur: 18,
      oran: 19,
      bwht: 20,
    };


    function shift(number, shift) {
      return number * Math.pow(2, shift);
    }

    function b64ToArrayBuffer(base64) {
      var bin = window.atob(base64);
      var len = bin.length;
      var bytes = new Uint8Array(len);
      for (var i = 0; i < len; i++) {
        bytes[i] = bin.charCodeAt(i);
      }
      return bytes.buffer;
    }

    async function b64PNGFromDC6(item) {
      const response = await fetch(`data/global/items/${item.inv_file}.dc6`);
      if (response.status !== 200) {
        return null;
      }
      const dc6 = new Uint8Array(await response.arrayBuffer());
      let idx = 32;
      const width = dc6[idx] | dc6[idx + 1] << 8 | dc6[idx + 2] << 16 | dc6[idx + 2] << 24;
      idx = 36;
      const height = dc6[idx] | dc6[idx + 1] << 8 | dc6[idx + 2] << 16 | dc6[idx + 2] << 24;
      idx = 56;
      const length = dc6[idx] | dc6[idx + 1] << 8 | dc6[idx + 2] << 16 | dc6[idx + 2] << 24;
      let x = 0, y = height - 1;
      const indexed = [];
      if (width == 0 || height == 0) {
        return null;
      }
      for (let i = 0; i < height; i += 1) {
        indexed[i] = Array(width).fill(255);
      }
      for (let i = 0; i < length;) {
        let b = dc6[60 + i++];
        if (b === 0x80) { //eol
          x = 0, y--;
        } else if (b & 0x80) {
          x += b & 0x7F; //transparent repeat for N bytes
        } else {
          //read N bytes
          for (let j = 0; j < b; j++) {
            indexed[y][x++] = dc6[60 + i++];
          }
        }
      }
      let canvas = document.createElement('canvas'),
        context = canvas.getContext('2d'),
        data = context.createImageData(width, height);
      canvas.height = height;
      canvas.width = width;
      for (let y = 0; y < height; y += 1) {
        for (let x = 0; x < width; x += 1) {
          let paletteIdx = indexed[y][x];
          const offset = (y * width + x) * 4;
          if (paletteIdx === 255) { //transparent
            continue;
          }
          if (item.transform_color && item.inv_transform) {
            let transformIdx = colors[item.transform_color];
            if (transformIdx >= 0 && window.palettes[item.inv_transform]) {
              paletteIdx = window.palettes[item.inv_transform][transformIdx][paletteIdx];
            }
          }
          const rgb = window.palettes["ACT1"][paletteIdx];
          data.data[offset] = rgb[0];
          data.data[offset + 1] = rgb[1];
          data.data[offset + 2] = rgb[2];
          data.data[offset + 3] = 255;
        }
      }

      // put data to context at (0, 0)
      context.putImageData(data, 0, 0);

      // output image
      var img = new Image();
      var src = canvas.toDataURL('image/png');
      canvas.remove();
      return src;
    }


    Vue.directive('select', {
      inserted: function (el) {
        var self = this;
        $(el).select2({
          //matcher: modelMatcher,
          //minimumResultsForSearch: 6,
          //dropdownAutoWidth: true,
          width: 'auto',
          dropdownParent: $(".modal") //won't work if not in modal.
        }).on('change', function (e) {
          if (e.detail === "vue-directive") {
            return; // prevent stack overflow (i.e. listening to the event we threw ourselves)
          }
          // throw regular change (non jQuery) event, so vue reacts
          el.dispatchEvent(new CustomEvent("change", {
            detail: "vue-directive"
          }));
          return false;
        })
      }
    });

    Vue.component('Stats', {
      template: '#Stats',
      props: {
        save: Object,
      },
      data() {
        return {
          stats: window.constants.constants.magical_properties,
        }
      },
      methods: {
        max(id) {
          let stat = this.stats[id];
          let s = shift(1, stat.cB) - 1;
          if (stat.vS) {
            s = Math.floor(shift(s, -stat.vS))
          }
          return s;
        },
        min(id) {
          return 0;
        },
        change(id, values, idx) {
          let maxValue = this.max(id),
            minValue = this.min(id);
          if (values[idx] > maxValue) {
            values[idx] = maxValue;
          } else if (values[idx] < minValue) {
            values[idx] = minValue;
          }
        },
      }
    });

    Vue.component('Waypoints', {
      template: '#Waypoints',
      props: {
        save: Object,
      },
      data() {
        return {
          difficulties: [{ key: 'normal', value: "Normal" }, { key: 'nm', value: "Nightmare" }, { key: 'hell', value: "Hell" }]
        };
      }
    });

    Vue.component('Skills', {
      template: '#Skills',
      props: {
        save: Object,
      }
    });

    Vue.component('Quests', {
      template: '#Quests',
      props: {
        save: Object,
      },
      data() {
        return {
          difficulties: [{ key: 'quests_normal', value: "Normal" }, { key: 'quests_nm', value: "Nightmare" }, { key: 'quests_hell', value: "Hell" }]
        };
      }
    });

    Vue.component('Editor', {
      template: '#Editor',
      props: {
        item: Object,
      },
      data() {
        return {
          rarities: [{ key: 1, value: 'Low' }, { key: 2, value: 'Normal' }, { key: 3, value: 'Superior' }, { key: 4, value: 'Magic' }, { key: 5, value: 'Set' }, { key: 6, value: 'Rare' }, { key: 7, value: 'Unique' }, { key: 8, value: 'Crafted' }],
          locations: [{ key: 0, value: 'Stored' }, { key: 1, value: 'Equipped' }, { key: 4, value: 'Cursor' }],
          equipped_locations: [{ key: 1, value: 'Head' }, { key: 2, value: 'Neck' }, { key: 3, value: 'Torso' }, { key: 4, value: 'Right Hand' }, { key: 5, value: 'Left Hand' }, { key: 6, value: 'Right Finger' }, { key: 7, value: 'Left Finger' }, { key: 8, value: 'Waist' }, { key: 9, value: 'Boots' }, { key: 10, value: 'Gloves' }, { key: 11, value: 'Alternate Right Hand' }, { key: 12, value: 'Alternate Left Hand' }],
          storage_pages: [{ key: 1, value: 'Inventory' }, { key: 4, value: 'Cube' }, { key: 5, value: 'Stash' }],
          prefixes: window.constants.constants.magic_prefixes,
          suffixes: window.constants.constants.magic_suffixes,
          rare_names: window.constants.constants.rare_names,
          unq_items: window.constants.constants.unq_items,
          set_items: window.constants.constants.set_items,
          timeout: null,
          target: {
            location: this.item.location_id,
            equipped_location: this.item.equipped_id,
            x: this.item.position_x,
            y: this.item.position_y,
            storage_page: this.item.alt_position_id
          }
        };
      },
      watch: {
        item: {
          handler(val) {
            //this seems hackish. basically it is to prevent infinite loop since we modify item here.
            if (this.timeout) {
              clearTimeout(this.timeout);
              this.timeout = null;
              return;
            }
            this.timeout = setTimeout(() => {
              val = d2s.enhanceItem(val, window.constants.constants);
            }, 0);
          },
          deep: true
        },
      },
      methods: {
        updateTarget(val) {
          this.target = {
            location: val.location_id,
            equipped_location: val.equipped_id,
            x: val.position_x,
            y: val.position_y,
            storage_page: val.alt_position_id
          }
        },
        moveToTarget(item) {
          if (this.target.location == 1) {
            item.location_id = this.target.location;
            item.equipped_id = this.target.equipped_location;
            item.position_x = 0;
            item.position_y = 0;
            item.alt_position_id = 0;
          } else if (this.target.location == 0) {
            item.location_id = this.target.location;
            item.equipped_id = 0;
            item.position_x = this.target.x;
            item.position_y = this.target.y;
            item.alt_position_id = this.target.storage_page;
          } else if (this.target.location == 4) {
            item.location_id = this.target.location;
            item.equipped_id = 0;
            item.position_x = 4; //why?
            item.position_y = 0;
            item.alt_position_id = 0;
          }
        }
      }
    });

    Vue.component('Grid', {
      template: '#Grid',
      props: {
        items: Array,
        width: Number,
        height: Number,
      },
      computed: {
        gridClass() {
          return `w-${this.width} h-${this.height}`;
        },
      },
      methods: {
        onSelect(item) {
          this.$emit('item-selected', item);
        }
      }
    });

    Vue.component('ItemStatsEditor', {
      template: '#ItemStatsEditor',
      props: {
        itemStats: Array
      },
      data() {
        return {
          stats: window.constants.constants.magical_properties,
          skills: window.constants.constants.skills,
          classes: window.constants.constants.classes,
        }
      },
      methods: {
        max(id) {
          let stat = this.stats[id];
          return shift(1, stat.sB) - 1;
        },
        min(id) {
          //for the stat to be present need value > 0
          return 1;
        },
        change(id, values, idx) {
          let maxValue = this.max(id),
            minValue = this.min(id);
          if (values[idx] > maxValue) {
            values[idx] = maxValue;
          } else if (values[idx] < minValue) {
            values[idx] = minValue;
          }
        },
        add() {
          this.itemStats.push({ id: 0, values: [] });
        },
        remove(idx) {
          this.itemStats.splice(idx, 1);
        },
        isClass(id, idx) {
          let stat = this.stats[id];
          if ((stat.dF == 14) && idx == 2) {
            return true;
          }
          if ((stat.dF == 13) && idx == 1) {
            return true;
          }
          return false;
        },
        isClassSkill(id, idx) {
          let stat = this.stats[id];
          if ((stat.dF == 14) && idx == 1) {
            return true;
          }
          return false;
        },
        isSkill(id, idx) {
          let stat = this.stats[id];
          if (stat.dF == 14) {
            return false;
          }
          if (stat.sP) {
            if (stat.e == 3 || stat.e == 2) {
              return idx == 2;
            } else {
              return idx == 1;
            }
          }
          return false;
        },
        numValues(id) {
          let stat = this.stats[id];
          if (stat.dF == 14 || stat.e == 2) {
            return 3;
          }
          if (stat.e == 3) {
            return 4;
          }
          if (stat.sP) {
            return 2;
          }
          return 1;
        }
      }
    });

    Vue.component('Item', {
      template: '#Item',
      data() {
        return {
          tooltipShown: false,
          tooltip: null,
          edit: false,
          contextMenuShown: false,
        };
      },
      props: {
        item: Object,
        clazz: String
      },
      async mounted() {
        this.createPopper();
      },
      computed: {
        itemClass() {
          let clazz = `${this.clazz ? this.clazz : 'item'} w-${this.item.inv_width} h-${this.item.inv_height}`;
          if (this.item.location_id !== 1 && !this.clazz) {
            clazz += ` x-${this.item.position_x} y-${this.item.position_y}`;
          }
          return clazz;
        }
      },
      destroyed() {
        if (this.tooltip) {
          this.tooltip.destroy();
        }
      },
      methods: {
        socketStyle(idx) {
          const y = [[50], [25, 75], [5, 50, 95]];
          const x = [[50], [10, 90]];
          const i = idx - 1;
          switch (this.item.total_nr_of_sockets) {
            case 1:
            case 2:
            case 3: {
              const j = this.item.total_nr_of_sockets - 1;
              if (this.item.inv_height > 2 || this.item.total_nr_of_sockets < 3) {
                return {
                  transform: `translateX(-${x[0][0]}%) translateY(-${y[j][i]}%)`,
                  top: `${y[j][i]}%`,
                  left: `${x[0][0]}%`,
                };
              }
              const k = [y[2][0], y[2][2], y[2][2]];
              const l = [x[0][0], x[1][0], x[1][1]];
              return {
                transform: `translateX(-${l[i]}%) translateY(-${k[i]}%)`,
                top: `${k[i]}%`,
                left: `${l[i]}%`,
              };
            }
            case 4:
            case 6: {
              const j = (this.item.total_nr_of_sockets / 2) - 1;
              return {
                transform: `translateX(-${x[1][i % 2]}%) translateY(-${y[j][Math.floor(i / 2)]}%)`,
                top: `${y[j][Math.floor(i / 2)]}%`,
                left: `${x[1][i % 2]}%`,
              };
            }
            case 5: {
              const k = [y[2][0], y[2][0], y[2][2], y[2][2], y[2][1]];
              const l = [x[1][0], x[1][1], x[1][0], x[1][1], x[0][0]];
              return {
                transform: `translateX(-${l[i]}%) translateY(-${k[i]}%)`,
                top: `${k[i]}%`,
                left: `${l[i]}%`,
              };
            }
            default: {
              return {};
            }
          }
        },
        itemName(item) {
          let name = item.type_name;
          if (item.magic_prefix_name) {
            name = `${item.magic_prefix_name} ${name}`;
          }
          if (item.magic_suffix_name) {
            name = `${name} ${item.magic_suffix_name}`;
          }
          if (item.rare_name) {
            name = `${item.rare_name} ${name}`;
          }
          if (item.rare_name2) {
            name = `${name} ${item.rare_name2}`;
          }
          const personalizedName = item.personalized_name ? `${item.personalized_name}'s ` : '';
          if (item.set_name) {
            name = `${name}\\n${personalizedName}${item.set_name}`;
          }
          if (item.unique_name) {
            name = `${name}\\n${personalizedName}${item.unique_name}`;
          }
          if (item.runeword_name) {
            const runes = item.socketed_items.map(e => e.type_name.split(' ')[0]).join('');
            name = `\\gold;'${runes}'\\n${name}\\n\\gold;${personalizedName}${item.runeword_name}`;
          }
          return name.split('\\n').map((d) => {
            const s = d.replace(/\\(.*?);/gi, (result, match) => `</div><div class="${match}">`);
            return `<div>${s}</div>`;
          }).reverse().join('');
        },
        itemNameClass(item) {
          if (item.given_runeword) {
            return 'white';
          }
          switch (item.quality) {
            case 1:
              return 'grey';
            case 2:
            case 3:
              return 'white';
            case 4:
              return 'blue';
            case 5:
              return 'green';
            case 6:
              return 'yellow';
            case 7:
              return 'gold';
            case 8:
              return 'orange';
            default:
              return 'white';
          }
        },
        statDescription(stat) {
          if (!stat.description || stat.visible === false) {
            return null;
          }
          const ds = stat.description.split('\\n');
          return ds.map((d) => {
            const s = d.replace(/\\(.*?);/gi, (result, match) => `</div><div class="${match}">`);
            return `<div>${s}</div>`;
          }).reverse().join('');
        },
        createPopper() {
          const vm = this;
          this.tooltip = tippy(this.$refs.itemRef, {
            content: this.$refs.tooltipRef,
            hideOnClick: false,
            duration: [0, 0],
            distance: 0,
            arrow: false,
            onShown: () => { vm.tooltipShown = true; },
            onHidden: () => { vm.tooltipShown = false; },
          });
        },
      }
    });

    Vue.component('Equipped', {
      template: '#Equipped',
      data() {
        return {
          alt_displayed: false
        };
      },
      computed: {
        head() { return this.items.find(e => e.equipped_id === 1); },
        neck() { return this.items.find(e => e.equipped_id === 2); },
        torso() { return this.items.find(e => e.equipped_id === 3); },
        right_hand() { return this.items.find(e => e.equipped_id === 4); },
        left_hand() { return this.items.find(e => e.equipped_id === 5); },
        right_finger() { return this.items.find(e => e.equipped_id === 6); },
        left_finger() { return this.items.find(e => e.equipped_id === 7); },
        waist() { return this.items.find(e => e.equipped_id === 8); },
        feet() { return this.items.find(e => e.equipped_id === 9); },
        hands() { return this.items.find(e => e.equipped_id === 10); },
        alt_right_hand() { return this.items.find(e => e.equipped_id === 11); },
        alt_left_hand() { return this.items.find(e => e.equipped_id === 12); }
      },
      props: {
        items: Array,
      },
      methods: {
        setAltDisplayed(value) {
          this.alt_displayed = value;
        },
        onSelect(item) {
          this.$emit('item-selected', item);
        }
      },
    });

    Vue.component('Mercenary', {
      template: '#Mercenary',
      props: {
        items: Array,
      },
      computed: {
        head() { return this.items.find(e => e.equipped_id === 1); },
        neck() { return this.items.find(e => e.equipped_id === 2); },
        torso() { return this.items.find(e => e.equipped_id === 3); },
        right_hand() { return this.items.find(e => e.equipped_id === 4); },
        left_hand() { return this.items.find(e => e.equipped_id === 5); },
        right_finger() { return this.items.find(e => e.equipped_id === 6); },
        left_finger() { return this.items.find(e => e.equipped_id === 7); },
        waist() { return this.items.find(e => e.equipped_id === 8); },
        feet() { return this.items.find(e => e.equipped_id === 9); },
        hands() { return this.items.find(e => e.equipped_id === 10); },
        alt_right_hand() { return this.items.find(e => e.equipped_id === 11); },
        alt_left_hand() { return this.items.find(e => e.equipped_id === 12); }
      },
      methods: {
        onSelect(item) {
          this.$emit('item-selected', item);
        }
      }
    });

    let app = new Vue({
      el: "#app",
      data: {
        save: null,
        activeTab: 1,
        selected: null,
        itempack: window.itempack,
        previewModel: null,
        preview: null,
        load: null,
      },
      created() {
      },
      async mounted() {
        if (window.d2s === undefined) {
          let s = document.createElement('script');
          s.src = "https://github.com/dschu012/d2s/releases/latest/download/constants.bundle.min.js";
          document.querySelector('body').appendChild(s);
          s = document.createElement('script');
          s.src = "https://github.com/dschu012/d2s/releases/latest/download/d2s.bundle.min.js";
          document.querySelector('body').appendChild(s);
        }
        if (window.palettes == undefined) {
          window.palettes = {};
          window.palettes["ACT1"] = [];
          let response = await fetch(`data/global/palette/ACT1/pal.dat`);
          let buffer = new Uint8Array(await response.arrayBuffer());
          for (let i = 0; i < 256; i += 1) {
            window.palettes["ACT1"].push([buffer[i * 3 + 2], buffer[i * 3 + 1], buffer[i * 3]]);
          }
          for (const [k, v] of Object.entries(colormaps)) {
            response = await fetch(v);
            buffer = new Uint8Array(await response.arrayBuffer());
            window.palettes[k] = [];
            for (let i = 0; i < Object.keys(colors).length; i += 1) {
              window.palettes[k].push(buffer.slice(0 + (i * 256), 256 + (i * 256)));
            }
          }
        }
      },
      filters: {
      },
      computed: {
        equipped() {
          return this.save.items.filter(
            item => item.location_id === 1,
          );
        },
        inventory() {
          return this.save.items.filter(
            item => item.location_id === 0 && item.alt_position_id === 1,
          );
        },
        stash() {
          return this.save.items.filter(
            item => item.location_id === 0 && item.alt_position_id === 5,
          );
        },
        cube() {
          return this.save.items.filter(
            item => item.location_id === 0 && item.alt_position_id === 4,
          );
        },
        mercenary() {
          return this.save.merc_items || [];
        },
      },
      methods: {
        changeTab(i) {
          this.activeTab = i;
        },
        onSelect(e) {
          this.selected = e;
          if(this.$refs.editor) this.$refs.editor.updateTarget(e);
        },
        async previewItem(e) {
          let bytes = b64ToArrayBuffer(this.previewModel.value);
          this.preview = await d2s.readItem(bytes, 0x60, window.constants.constants);
          b64PNGFromDC6(this.preview).then(src => Vue.set(this.preview, 'src', src));
          if (!this.preview.socketed_items) {
            return;
          }
          this.preview.socketed_items.forEach(item => {
            b64PNGFromDC6(item).then(src => Vue.set(item, 'src', src));
          });
        },
        loadItem() {
          this.preview.location_id = 4;
          this.preview.equipped_id = 0;
          this.preview.position_x = 4;
          this.preview.position_y = 0;
          this.preview.alt_position_id = 0;
          this.save.items.push(this.preview);
          this.selected = this.preview;
        },
        setPropertiesOnSave() {
          [... this.save.items, ... this.save.merc_items, ... this.save.corpse_items, this.save.golem_item].forEach(item => {
            if (!item) {
              return;
            }
            b64PNGFromDC6(item).then(src => Vue.set(item, 'src', src));
            if (!item.socketed_items) {
              return;
            }
            item.socketed_items.forEach(item => {
              b64PNGFromDC6(item).then(src => Vue.set(item, 'src', src));
            });
          });
        },
        onFileLoad(event) {
          let that = this;
          d2s.read(event.target.result, constants.constants).then(response => {
            that.save = response;
            that.setPropertiesOnSave();
          });
        },
        onFileChange(event) {
          let reader = new FileReader();
          reader.onload = this.onFileLoad;
          reader.readAsArrayBuffer(event.target.files[0]);
          event.target.value = null;
        },
        unlockHell() {
          for (var i of ["quests_normal", "quests_nm", "quests_hell"]) {
            for (var j of ["act_i", "act_ii", "act_iii", "act_iv", "act_v"]) {
              this.save.header[i][j].introduced = true;
              this.save.header[i][j].completed = true;
            }
            this.save.header[i].act_iii.the_guardian.is_completed = true;
            this.save.header[i].act_iv.terrors_end.is_completed = true;
          }
          for (var i of ["normal", "nm", "hell"]) {
            this.save.header.waypoints[i].act_i.rogue_encampement = true;
            this.save.header.waypoints[i].act_ii.lut_gholein = true;
            this.save.header.waypoints[i].act_iii.kurast_docks = true;
            this.save.header.waypoints[i].act_iv.the_pandemonium_fortress = true;
            this.save.header.waypoints[i].act_v.harrogath = true;
          }
        },
        unlockAllWPs() {
          for (var i of ["normal", "nm", "hell"]) {
            for (var a in this.save.header.waypoints[i]) {
              for (var w in this.save.header.waypoints[i][a]) {
                this.save.header.waypoints[i][a][w] = true;
              }
            }
          }
        },
        setLvl99() {
          let s = this.save.attributes.level;
          this.save.header.level = 99;
          this.save.attributes.experience = 3520485254;
          this.save.attributes.level = 99;
          this.save.attributes.unused_stats = ((99 - s) * 5);
        },
        setAllSkills20() {
          for (var s of this.save.skills) {
            s.points = 20;
          }
        },
        saveFile(version) {
          this.save.header.version = version;
          let link = document.createElement('a');
          let that = this;
          link.style.display = 'none';
          document.body.appendChild(link);
          d2s.write(this.save, constants.constants).then(function (response) {
            let blob = new Blob([response], { type: "octet/stream" });
            link.href = window.URL.createObjectURL(blob);
            link.download = that.save.header.name + '.d2s';
            link.click();
            link.remove();
          });
        }
      }
    });
  </script>
</body>

</html>